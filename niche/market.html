<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>Market Niche · Competitive Landscape · StarTimes Uganda</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@400;500;600;700&family=Barlow:wght@300;400;500;600&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-dark: #050816;
      --glass-bg: rgba(15, 23, 42, 0.86);
      --glass-border: rgba(148, 163, 184, 0.3);
      --glass-shadow: 0 18px 50px rgba(0,0,0,0.8);

      --text-main: #f9fafb;
      --text-muted: #94a3b8;

      --c-root:    #06b6d4;
      --c-spatial: #10b981;
      --c-market:  #a855f7;

      --font-din:  'Barlow', sans-serif;
      --font-cond: 'Barlow Condensed', sans-serif;
      --font-mono: 'JetBrains Mono', monospace;
    }

    * { margin:0; padding:0; box-sizing:border-box; }

    html, body {
      height: 100%;
      width: 100%;
      overflow: hidden;
    }

    body {
      font-family: var(--font-din);
      background: var(--bg-dark);
      color: var(--text-main);
      /* 星云背景 */
      background-image:
        radial-gradient(circle at 15% 10%, rgba(56,189,248,0.18) 0, transparent 45%),
        radial-gradient(circle at 85% 80%, rgba(168,85,247,0.18) 0, transparent 50%),
        radial-gradient(circle at 50% 50%, #020617 0, #020617 60%, #000 100%);
      position: relative;
    }

    /* 顶部导航，与 ecology / niche 对齐 */
    .top-bar {
      position: fixed;
      inset: 0 0 auto 0;
      height: 72px;
      padding: 0 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: linear-gradient(to bottom, rgba(5,8,22,0.96), transparent);
      z-index: 20;
      pointer-events: none;
    }
    .brand {
      pointer-events: auto;
      display:flex;
      flex-direction:column;
    }
    .brand-path {
      font-family: var(--font-cond);
      font-size: 11px;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      color: var(--c-root);
      opacity: .95;
      margin-bottom: 4px;
      font-weight: 600;
    }
    .brand-title {
      font-family: var(--font-cond);
      font-size: 18px;
      font-weight: 600;
      letter-spacing: .6px;
      text-transform: uppercase;
      color: #e5e7eb;
    }

    .breadcrumb {
      pointer-events:auto;
      font-family:var(--font-cond);
      font-size:11px;
      letter-spacing:1.4px;
      text-transform:uppercase;
      color:rgba(148,163,184,0.9);
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      top:14px;
      display:flex;
      gap:6px;
      align-items:center;
    }
    .crumb-sep{opacity:.6;}
    .crumb-active{color:#e5e7eb;}

    .back-btn {
      pointer-events: auto;
      font-family: var(--font-cond);
      font-size: 14px;
      font-weight: 600;
      padding: 8px 26px;
      border-radius: 999px;
      text-transform: uppercase;
      letter-spacing: 1px;
      text-decoration: none;
      color: var(--text-main);
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.35);
      backdrop-filter: blur(14px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.5);
      transition: all .25s ease;
    }
    .back-btn:hover {
      background:#38bdf8;
      color:#020617;
      border-color:#38bdf8;
      box-shadow:0 10px 28px rgba(56,189,248,0.5);
      transform:translateY(-2px);
    }

    /* 主布局：左文案 + 右图表 */
    .page-layout {
      position:absolute;
      left:0; right:0; top:72px; bottom:0;
      padding:32px 40px 32px;
      display:flex;
      gap:32px;
    }

    .panel-left {
      width:360px;
      max-width:380px;
      display:flex;
      flex-direction:column;
      justify-content:flex-start;
      pointer-events:none;
    }

    .hero-label {
      font-family:var(--font-cond);
      font-size:12px;
      font-weight:700;
      letter-spacing:1.5px;
      text-transform:uppercase;
      color:var(--c-market);
      margin-bottom:10px;
    }
    .hero-title {
      font-family:var(--font-cond);
      font-size:44px;
      font-weight:700;
      line-height:0.9;
      letter-spacing:-0.5px;
      text-transform:uppercase;
      margin-bottom:18px;
      background:linear-gradient(180deg,#f9fafb 0%,#9ca3af 100%);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    .hero-subtitle {
      font-family:var(--font-cond);
      font-size:14px;
      letter-spacing:1px;
      text-transform:uppercase;
      color:rgba(148,163,184,0.95);
      margin-bottom:10px;
    }
    .hero-desc {
      font-size:13px;
      line-height:1.7;
      color:var(--text-muted);
      padding-left:16px;
      border-left:3px solid rgba(148,163,184,0.6);
      margin-bottom:20px;
    }
    .hero-desc strong{color:#e5e7eb;font-weight:500;}

    .hero-list {
      list-style:none;
      font-size:12px;
      line-height:1.6;
      color:rgba(148,163,184,0.95);
      margin-bottom:20px;
    }
    .hero-list li::before{
      content:'• ';
      color:rgba(148,163,184,0.9);
    }

    /* 信息卡片：不会盖住图表，固定在左列 */
    .info-card {
      pointer-events:auto;
      margin-top:8px;
      padding:22px 20px 20px;
      border-radius:24px;
      background:var(--glass-bg);
      border:1px solid var(--glass-border);
      box-shadow:var(--glass-shadow);
      backdrop-filter:blur(20px);
      -webkit-backdrop-filter:blur(20px);
    }
    .info-header {
      font-family:var(--font-cond);
      font-size:11px;
      letter-spacing:1.4px;
      text-transform:uppercase;
      color:rgba(148,163,184,0.9);
      display:flex;
      justify-content:space-between;
      margin-bottom:6px;
    }
    .info-header-tag {
      color:var(--c-root);
    }
    .info-title {
      font-family:var(--font-cond);
      font-size:24px;
      font-weight:600;
      margin-bottom:10px;
      text-transform:uppercase;
    }
    .info-line {
      display:flex;
      justify-content:space-between;
      font-size:12px;
      margin-bottom:4px;
      color:rgba(226,232,240,0.95);
    }
    .info-label {
      color:rgba(148,163,184,0.9);
      font-family:var(--font-cond);
      text-transform:uppercase;
      letter-spacing:0.8px;
      font-size:11px;
    }
    .info-swot-title {
      margin-top:8px;
      font-family:var(--font-cond);
      font-size:11px;
      color:rgba(148,163,184,0.9);
      letter-spacing:1px;
      text-transform:uppercase;
    }
    .info-swot-list {
      margin-top:4px;
      padding-left:14px;
      font-size:12px;
      color:rgba(226,232,240,0.92);
      line-height:1.5;
    }

    .panel-right {
      flex:1;
      position:relative;
      min-width:0;
    }
    #market-chart {
      position:absolute;
      inset:0;
    }

    .axis-hint {
      position:absolute;
      left:0;
      bottom:0;
      font-family:var(--font-cond);
      font-size:11px;
      letter-spacing:1.2px;
      text-transform:uppercase;
      color:rgba(148,163,184,0.8);
      pointer-events:none;
    }

    @media (max-width: 900px){
      .page-layout{
        flex-direction:column;
        padding:24px 18px 18px;
      }
      .panel-left{
        width:auto;
        max-width:none;
      }
      .panel-right{
        height:340px;
      }
      .hero-title{
        font-size:36px;
      }
      .breadcrumb{display:none;}
    }
  </style>
</head>
<body>

  <!-- 顶部导航 -->
  <div class="top-bar">
    <div class="brand">
      <div class="brand-path">STARTIMES / UGANDA / NICHE / MARKET</div>
      <div class="brand-title">Market Niche · Competitive Landscape</div>
    </div>

    <div class="breadcrumb">
      <span>Data Space</span><span class="crumb-sep">/</span>
      <span>Niche</span><span class="crumb-sep">/</span>
      <span class="crumb-active">Market Niche</span>
    </div>

    <a class="back-btn" href="./index.html">Back to Niche</a>
  </div>

  <!-- 主内容 -->
  <main class="page-layout">
    <!-- 左侧文案 + 信息卡 -->
    <section class="panel-left">
      <div>
        <div class="hero-label">2.2 MARKET NICHE · PAY TV</div>
        <h1 class="hero-title">Competitive<br>Landscape</h1>
        <div class="hero-subtitle">StarTimes vs DStv / GOtv / Azam TV / Zuku TV</div>
        <p class="hero-desc">
          本页把乌干达 Pay TV 市场放在一张图里：<strong>内圈</strong>是运营商整体市场份额，
          <strong>外圈</strong>拆解为价格带、内容深度、本地内容、体育版权、覆盖与渠道等维度，
          同时看到<span style="white-space:nowrap;">「占有率 × 结构优势」</span>。
        </p>
        <ul class="hero-list">
          <li><strong>2.2.1 市场占有率：</strong>基于 Ipsos NAMS 2023.6 与公司内部估算。</li>
          <li><strong>2.2.2 SWOT 概览：</strong>悬停运营商或外圈维度，可在下方卡片看到简要 SWOT。</li>
          <li><strong>2.2.3–2.2.6：</strong>后续小节将分别展开「产品类型与价格带、频道 / 节目包、最优产品、渠道对比」。</li>
        </ul>
      </div>

      <!-- 动态信息卡 -->
      <div class="info-card" id="info-card">
        <div class="info-header">
          <span id="card-segment">VALUE / MASS MARKET</span>
          <span class="info-header-tag" id="card-position">LOW PRICE · WIDE COVERAGE</span>
        </div>
        <div class="info-title" id="card-name">StarTimes</div>

        <div class="info-line">
          <span class="info-label">估算市场份额</span>
          <span id="card-share">55%</span>
        </div>
        <div class="info-line">
          <span class="info-label">主力价格带</span>
          <span id="card-price">低价包 · 家庭装</span>
        </div>
        <div class="info-line">
          <span class="info-label">内容 / 频道结构</span>
          <span id="card-content">本地 + 国际体育均衡，涵盖 DTT / DTH</span>
        </div>

        <div class="info-swot-title">SWOT SNAPSHOT</div>
        <ul class="info-swot-list" id="card-swot">
          <li>价格竞争力强，覆盖城市 + 乡镇主流用户。</li>
          <li>体育与本地内容组合，对 DSTv / GOtv 形成替代。</li>
          <li>ARPU 较低，对内容投入与运营效率有压力。</li>
        </ul>
      </div>
    </section>

    <!-- 右侧图表 -->
    <section class="panel-right">
      <div id="market-chart"></div>
      <div class="axis-hint">FROM MARKET SHARE → PRODUCT → CHANNELS</div>
    </section>
  </main>

<script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
<script>
  // ---------- 数据 ----------
  const shareData = [
    { name: 'StarTimes', value: 55 },
    { name: 'GOtv',      value: 16 },
    { name: 'Zuku TV',   value: 12 },
    { name: 'DStv',      value: 12 },
    { name: 'Azam TV',   value: 5 }
  ];

  const brandColors = {
    'StarTimes': '#fbbf24',
    'GOtv':      '#22c55e',
    'Zuku TV':   '#0ea5e9',
    'DStv':      '#3b82f6',
    'Azam TV':   '#a855f7'
  };

  const brandStruct = [
    {
      name: 'StarTimes',
      share: 55,
      segment: 'Value / Mass Market',
      position: 'Low price · Wide coverage',
      priceBand: '低价 / 亲民 ARPU',
      contentProfile: '本地频道 + 国际体育 + 电影剧集均衡',
      swot: [
        'S：价格竞争力强，DTT + DTH 覆盖 200 万+家庭。',
        'W：高端国际体育版权相对弱于 DSTv。',
        'O：农村和二线城镇增量空间大，可继续下沉与数字化收费。',
        'T：OTT 与盗版内容挤压，宏观经济波动影响续费能力。'
      ],
      dimensions: [
        { name: 'Price',           score: 9 },
        { name: 'Content depth',   score: 7 },
        { name: 'Local content',   score: 8 },
        { name: 'Sports rights',   score: 7 },
        { name: 'Coverage / sales',score: 9 }
      ]
    },
    {
      name: 'DStv',
      share: 12,
      segment: 'Premium Satellite',
      position: 'High ARPU · Premium sports',
      priceBand: '高价 / 城市中高端',
      contentProfile: '顶级国际体育 + 电影剧集为主',
      swot: [
        'S：国际体育版权和高端内容最强。',
        'W：终端价格和月费高，渗透率受限。',
        'O：体育发烧友与高端家庭持续愿付费。',
        'T：经济压力期易被低价产品替代或停用。'
      ],
      dimensions: [
        { name: 'Price',           score: 4 },
        { name: 'Content depth',   score: 9 },
        { name: 'Local content',   score: 5 },
        { name: 'Sports rights',   score: 10 },
        { name: 'Coverage / sales',score: 7 }
      ]
    },
    {
      name: 'GOtv',
      share: 16,
      segment: 'Urban Terrestrial',
      position: 'DStv lite · Sports focus',
      priceBand: '中价 / 城市与城郊',
      contentProfile: '部分 DSTv 体育 + 娱乐内容迁移',
      swot: [
        'S：依托 DSTv 内容库，体育体验较强。',
        'W：频道与价格带与 StarTimes 重合，差异度有限。',
        'O：城市青年与租房人群仍有提升空间。',
        'T：与地面数字 TV、IPTV 及 OTT 多重竞争。'
      ],
      dimensions: [
        { name: 'Price',           score: 6 },
        { name: 'Content depth',   score: 7 },
        { name: 'Local content',   score: 5 },
        { name: 'Sports rights',   score: 8 },
        { name: 'Coverage / sales',score: 6 }
      ]
    },
    {
      name: 'Azam TV',
      share: 5,
      segment: 'Regional / Local Sports',
      position: 'Regional sports · Swahili focus',
      priceBand: '中低价 / 局部市场',
      contentProfile: '本地体育与区域内容为主',
      swot: [
        'S：在东非部分市场拥有本地体育优势。',
        'W：在乌干达整体份额小，品牌心智弱。',
        'O：可在球迷圈层做深度运营补位。',
        'T：受频点资源、销售网络与现金流制约。'
      ],
      dimensions: [
        { name: 'Price',           score: 7 },
        { name: 'Content depth',   score: 5 },
        { name: 'Local content',   score: 7 },
        { name: 'Sports rights',   score: 6 },
        { name: 'Coverage / sales',score: 4 }
      ]
    },
    {
      name: 'Zuku TV',
      share: 12,
      segment: 'Legacy / Niche',
      position: 'Cable heritage · Broadband bundle',
      priceBand: '中价 / 传统用户',
      contentProfile: '部分有线电视与宽带绑售',
      swot: [
        'S：在有线网络覆盖区仍有一批老用户。',
        'W：品牌老化，内容与设备升级有限。',
        'O：与宽带 / 光纤捆绑仍有一定粘性价值。',
        'T：受 OTT 和价格竞争挤压，份额持续被侵蚀。'
      ],
      dimensions: [
        { name: 'Price',           score: 6 },
        { name: 'Content depth',   score: 6 },
        { name: 'Local content',   score: 4 },
        { name: 'Sports rights',   score: 5 },
        { name: 'Coverage / sales',score: 5 }
      ]
    }
  ];

  const sunburstData = brandStruct.map(brand => ({
    name: brand.name,
    value: brand.share,
    itemStyle: { color: brandColors[brand.name] },
    children: brand.dimensions.map(dim => ({
      name: dim.name,
      value: dim.score,
      score: dim.score,
      itemStyle: {
        color: brandColors[brand.name],
        opacity: 0.35 + dim.score * 0.05
      },
      label: { show: dim.score >= 7 }
    }))
  }));

  const chartDom = document.getElementById('market-chart');
  const chart = echarts.init(chartDom);

  const brandMap = {};
  brandStruct.forEach(b => { brandMap[b.name] = b; });

  // 左侧信息卡元素
  const els = {
    seg: document.getElementById('card-segment'),
    pos: document.getElementById('card-position'),
    name: document.getElementById('card-name'),
    share: document.getElementById('card-share'),
    price: document.getElementById('card-price'),
    content: document.getElementById('card-content'),
    swot: document.getElementById('card-swot')
  };

  function updateCard(brandName){
    const b = brandMap[brandName];
    if(!b) return;
    els.seg.textContent    = b.segment;
    els.pos.textContent    = b.position;
    els.name.textContent   = b.name;
    els.share.textContent  = b.share + '%';
    els.price.textContent  = b.priceBand;
    els.content.textContent= b.contentProfile;
    els.swot.innerHTML = '';
    (b.swot || []).forEach(line => {
      const li = document.createElement('li');
      li.textContent = line;
      els.swot.appendChild(li);
    });
  }

  updateCard('StarTimes');

  // 视图状态：缩放 + 平移
  const viewState = {
    scale: 1.15,
    offsetX: 0,
    offsetY: 0
  };

const baseOption = {
  backgroundColor: 'transparent',
  // 首次加载有一个平滑渐变
  animationDuration: 900,
  animationEasing: 'cubicOut',
  // 后续更新（缩放 / 拖动）不做动画，直接跳到目标位置
  animationDurationUpdate: 0,
  animationEasingUpdate: 'linear',

    tooltip: {
      trigger: 'item',
      backgroundColor: 'rgba(15,23,42,0.96)',
      borderColor: 'rgba(148,163,184,0.7)',
      borderWidth: 1,
      padding: 10,
      textStyle: {
        fontFamily: 'Barlow, system-ui, -apple-system, BlinkMacSystemFont',
        fontSize: 12,
        color: '#e5e7eb'
      },
      formatter: function (params) {
        // 内圈：市场份额
        if (params.seriesName === 'Market Share') {
          const b = brandMap[params.name] || {};
          return [
            '<div style="font-family:\'Barlow Condensed\';font-size:14px;margin-bottom:4px;">',
            params.name,
            '</div>',
            '估算市场份额：<b>', (b.share || params.value), '%</b><br/>',
            '主力价格带：', b.priceBand || '--', '<br/>',
            '内容 / 频道结构：', b.contentProfile || '--'
          ].join('');
        }

        // 外圈：结构维度
        if (params.seriesName === 'Structure') {
          const path = params.treePathInfo || [];
          const brandName = path.length >= 2 ? path[1].name : null;
          const b = brandMap[brandName] || {};
          const dim = (b.dimensions || []).find(d => d.name === params.name);
          const score = dim ? dim.score : params.value;
          return [
            '<div style="font-family:\'Barlow Condensed\';font-size:14px;margin-bottom:4px;">',
            (brandName || '') + ' · ' + params.name,
            '</div>',
            '评分：<b>', score, '/10</b><br/>',
            '定位：', b.position || '--'
          ].join('');
        }

        return params.name;
      }
    },

    series: [
      {
        id: 'share',
        name: 'Market Share',
        type: 'pie',
        radius: [0, 0],      // 布局由 updateLayout 统一计算
        center: [0, 0],
        roseType: 'area',
        itemStyle: {
          borderColor: 'rgba(15,23,42,0.9)',
          borderWidth: 2
        },
        label: {
          color: '#e5e7eb',
          fontFamily: 'Barlow Condensed, sans-serif',
          fontWeight: 600,
          fontSize: 13,               // 放大文字
          formatter: '{b}\n{d}%'
        },
        labelLine: {
          length: 10,
          length2: 10
        },
        data: shareData.map(d => ({
          name: d.name,
          value: d.value,
          itemStyle: { color: brandColors[d.name] }
        })
        )
      },
      {
        id: 'structure',
        name: 'Structure',
        type: 'sunburst',
        radius: [0, 0],
        center: [0, 0],
        sort: null,
        nodeClick: false,
        emphasis: { focus: 'ancestor' },
        data: sunburstData,
        label: {
          rotate: 'radial',
          color: '#f9fafb',
          fontFamily: 'Barlow Condensed, sans-serif'
        },
        levels: []  // 具体 r0 / r 在布局函数里设置
      }
    ]
  };

  chart.setOption(baseOption);

  // 根据当前 viewState + 画布大小，重新计算 center / radius / levels
  function updateLayout() {
    const w = chart.getWidth();
    const h = chart.getHeight();
    const minSide = Math.min(w, h);
    const baseR = minSide * 0.42 * viewState.scale;

    const baseCx = w * 0.62;
    const baseCy = h * 0.50;
    const cx = baseCx + viewState.offsetX;
    const cy = baseCy + viewState.offsetY;

    chart.setOption({
      series: [
        {
          id: 'share',
          center: [cx, cy],
          radius: [baseR * 0.23, baseR * 0.37],
          label: { fontSize: 13 }   // 再次保证字体大小
        },
        {
          id: 'structure',
          center: [cx, cy],
          radius: [baseR * 0.45, baseR * 1.05],
          label: { fontSize: 12 },
          levels: [
            {}, // root
            {
              r0: baseR * 0.45,
              r:  baseR * 0.65,
              itemStyle: {
                borderWidth: 3,
                borderColor: 'rgba(15,23,42,0.85)'
              },
              label: {
                fontSize: 18,         // 品牌名更大
                fontWeight: 600,
                color: '#e5e7eb'
              }
            },
            {
              r0: baseR * 0.65,
              r:  baseR * 1.05,
              itemStyle: {
                borderWidth: 1,
                borderColor: 'rgba(15,23,42,0.7)'
              },
              label: {
                fontSize: 12
              }
            }
          ]
        }
      ]
    }, false);
  }

  updateLayout();

  // 悬停更新左侧信息卡
  chart.on('mouseover', function (params) {
    let brandName = null;

    if (params.seriesName === 'Market Share') {
      brandName = params.name;
    } else if (params.seriesName === 'Structure') {
      const path = params.treePathInfo || [];
      if (path.length >= 2) brandName = path[1].name;
    }

    if (brandName && brandMap[brandName]) {
      updateCard(brandName);
    }
  });

  // 拖动平移
  const zr = chart.getZr();
  let isDragging = false;
  let lastX = 0, lastY = 0;

  zr.on('mousedown', function (e) {
    isDragging = true;
    lastX = e.offsetX;
    lastY = e.offsetY;
  });
  zr.on('mouseup', function () { isDragging = false; });
  zr.on('globalout', function () { isDragging = false; });

  zr.on('mousemove', function (e) {
    if (!isDragging) return;
    const dx = e.offsetX - lastX;
    const dy = e.offsetY - lastY;
    lastX = e.offsetX;
    lastY = e.offsetY;

    viewState.offsetX += dx;
    viewState.offsetY += dy;

    const limit = Math.min(chart.getWidth(), chart.getHeight()) * 0.25;
    viewState.offsetX = Math.max(-limit, Math.min(limit, viewState.offsetX));
    viewState.offsetY = Math.max(-limit, Math.min(limit, viewState.offsetY));

    updateLayout();
  });

  // 滚轮缩放
  chartDom.addEventListener('wheel', function (e) {
    e.preventDefault();
    const delta = e.deltaY > 0 ? -0.08 : 0.08;
    viewState.scale = Math.max(0.8, Math.min(1.8, viewState.scale + delta));
    updateLayout();
  }, { passive: false });

  // 自适应窗口
  window.addEventListener('resize', function () {
    chart.resize();
    updateLayout();
  });
</script>

</body>
</html>
